{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///H:/Repositories/Social_media_app/social-media-frontend/src/components/Navbar.jsx"],"sourcesContent":["// src/components/Navbar.jsx\r\n\"use client\";\r\n\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function Navbar() {\r\n  const { user, logout } = useAuth();\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <nav className=\"w-full bg-gray-900 text-white shadow px-6 py-4 flex justify-between items-center\">\r\n      {/* App Logo or Name */}\r\n      <div\r\n        className=\"text-2xl font-bold text-blue-400 cursor-pointer\"\r\n        onClick={() => router.push(\"/dashboard\")}\r\n      >\r\n        Huddle\r\n      </div>\r\n\r\n      {/* Right Side Navigation */}\r\n      <div className=\"flex items-center gap-4\">\r\n        {user && (\r\n          <>\r\n            <button\r\n              onClick={() => router.push(`/profile/${user.id}`)}\r\n              className=\"text-gray-300 hover:text-blue-400 transition\"\r\n            >\r\n              My Profile\r\n            </button>\r\n            <button\r\n              onClick={() => router.push(\"/messages\")}\r\n              className=\"text-gray-300 hover:text-blue-400 transition\"\r\n            >\r\n              Messages\r\n            </button>\r\n            <button\r\n              onClick={logout}\r\n              className=\"bg-red-600 text-white px-4 py-1 rounded hover:bg-red-700 transition\"\r\n            >\r\n              Logout\r\n            </button>\r\n          </>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;AAG5B;AACA;AAHA;;;;AAKe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAC/B,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBACC,WAAU;gBACV,SAAS,IAAM,OAAO,IAAI,CAAC;0BAC5B;;;;;;0BAKD,8OAAC;gBAAI,WAAU;0BACZ,sBACC;;sCACE,8OAAC;4BACC,SAAS,IAAM,OAAO,IAAI,CAAC,CAAC,SAAS,EAAE,KAAK,EAAE,EAAE;4BAChD,WAAU;sCACX;;;;;;sCAGD,8OAAC;4BACC,SAAS,IAAM,OAAO,IAAI,CAAC;4BAC3B,WAAU;sCACX;;;;;;sCAGD,8OAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;AAQb","debugId":null}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///H:/Repositories/Social_media_app/social-media-frontend/src/components/AppLayout.jsx"],"sourcesContent":["// src/components/AppLayout.jsx\r\n\"use client\";\r\n\r\nimport { SocketProvider } from \"@/contexts/SocketContext\";\r\nimport Navbar from \"./Navbar\";\r\n\r\nexport default function AppLayout({ children }) {\r\n  return (\r\n    <SocketProvider>\r\n      <div className=\"min-h-screen bg-gray-900 text-white\">\r\n        <Navbar />\r\n        <main className=\"px-4\">{children}</main>\r\n      </div>\r\n    </SocketProvider>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;AAG/B;AACA;AAHA;;;;AAKe,SAAS,UAAU,EAAE,QAAQ,EAAE;IAC5C,qBACE,8OAAC,iIAAA,CAAA,iBAAc;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,4HAAA,CAAA,UAAM;;;;;8BACP,8OAAC;oBAAK,WAAU;8BAAQ;;;;;;;;;;;;;;;;;AAIhC","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///H:/Repositories/Social_media_app/social-media-frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\r\nimport axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: \"http://localhost:5000/api\", // no trailing slash\r\n  withCredentials: true, // keep if using cookies\r\n});\r\n\r\n// Optional: Add auth token if needed\r\nif (typeof window !== \"undefined\") {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) {\r\n    api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n  }\r\n}\r\n\r\nexport default api;\r\n"],"names":[],"mappings":"AAAA,sBAAsB;;;;AACtB;;AAEA,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,iBAAiB;AACnB;AAEA,qCAAqC;AACrC;;uCAOe","debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///H:/Repositories/Social_media_app/social-media-frontend/src/app/messages/%5BuserId%5D/page.jsx"],"sourcesContent":["// src/app/messages/[userId]/page.jsx\r\n\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport AppLayout from \"@/components/AppLayout\";\r\nimport { useSocket } from \"@/contexts/SocketContext\";\r\nimport api from \"@/services/api\";\r\n\r\nconst EMOJI_LIST = [\"üòÄ\", \"üòÇ\", \"üòç\", \"üò¢\", \"üëç\", \"üôè\", \"üéâ\", \"üí¨\"];\r\n\r\nexport default function ChatPage() {\r\n  const { user, loading } = useAuth();\r\n  const { userId } = useParams();\r\n  const router = useRouter();\r\n  const socket = useSocket();\r\n\r\n  const [partner, setPartner] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n\r\n  const fileInputRef = useRef();\r\n  const messagesEndRef = useRef();\r\n  const typingTimerRef = useRef();\r\n\r\n  // Redirect if not authenticated\r\n  useEffect(() => {\r\n    if (!loading && !user) router.push(\"/login\");\r\n  }, [loading, user, router]);\r\n\r\n  // Fetch partner info\r\n  useEffect(() => {\r\n    api\r\n      .get(`/users/profile/${userId}`)\r\n      .then(({ data }) => setPartner(data.user))\r\n      .catch(console.error);\r\n  }, [userId]);\r\n\r\n  // Join room, load history, bind events\r\n  useEffect(() => {\r\n    if (!socket || !user) return;\r\n\r\n    socket.emit(\"join\", user.id);\r\n\r\n    api\r\n      .get(`/messages/${userId}`)\r\n      .then(({ data }) => setMessages(data))\r\n      .catch(console.error);\r\n\r\n    socket.on(\"receive_message\", (msg) => {\r\n      setMessages((m) => [...m, msg]);\r\n    });\r\n    socket.on(\"message_sent\", (msg) => {\r\n      setMessages((m) => [...m, msg]);\r\n    });\r\n    socket.on(\"typing\", ({ from }) => {\r\n      if (from === userId) setIsTyping(true);\r\n    });\r\n    socket.on(\"stop_typing\", ({ from }) => {\r\n      if (from === userId) setIsTyping(false);\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"receive_message\");\r\n      socket.off(\"message_sent\");\r\n      socket.off(\"typing\");\r\n      socket.off(\"stop_typing\");\r\n    };\r\n  }, [socket, user, userId]);\r\n\r\n  // Scroll on new messages\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  // Send either text or image\r\n  const send = () => {\r\n    if (!socket) return;\r\n    // If an image is staged in input, it will be a data URL\r\n    const content = input.trim();\r\n    if (!content) return;\r\n\r\n    socket.emit(\"send_message\", { receiver_id: userId, content });\r\n    setInput(\"\");\r\n    setShowEmojiPicker(false);\r\n    socket.emit(\"stop_typing\", { to: userId });\r\n  };\r\n\r\n  // Handle typing\r\n  const onType = (e) => {\r\n    setInput(e.target.value);\r\n    if (!socket) return;\r\n    socket.emit(\"typing\", { to: userId });\r\n\r\n    clearTimeout(typingTimerRef.current);\r\n    typingTimerRef.current = setTimeout(() => {\r\n      socket.emit(\"stop_typing\", { to: userId });\r\n    }, 600);\r\n  };\r\n\r\n  // Emoji click\r\n  const addEmoji = (emoji) => {\r\n    setInput((i) => i + emoji);\r\n  };\r\n\r\n  // Photo selection\r\n  const onSelectPhoto = () => {\r\n    fileInputRef.current.click();\r\n  };\r\n  const onPhotoChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      setInput(reader.result); // data:url‚Ä¶\r\n      setShowEmojiPicker(false);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  if (loading || !user) return <p>Loading user‚Ä¶</p>;\r\n  if (!socket || !partner) return <p>Connecting to chat‚Ä¶</p>;\r\n\r\n  return (\r\n    <AppLayout>\r\n      {/* Header */}\r\n      <div className=\"flex items-center gap-3 bg-gray-800 px-4 py-2 rounded-t\">\r\n        <button onClick={() => router.back()} className=\"text-xl\">\r\n          ‚Üê\r\n        </button>\r\n        <img\r\n          src={partner.avatar}\r\n          alt={partner.username}\r\n          className=\"w-10 h-10 rounded-full object-cover\"\r\n        />\r\n        <h2 className=\"text-lg font-semibold\">{partner.username}</h2>\r\n      </div>\r\n\r\n      {/* Messages */}\r\n      <div className=\"flex-1 overflow-y-auto px-4 py-2 space-y-2 bg-gray-900\">\r\n        {messages.map((msg, i) => {\r\n          const mine = msg.sender_id === user.id;\r\n          return (\r\n            <div\r\n              key={i}\r\n              className={`flex items-end ${\r\n                mine ? \"justify-end\" : \"justify-start\"\r\n              }`}\r\n            >\r\n              {!mine && (\r\n                <img\r\n                  src={partner.avatar}\r\n                  alt=\"\"\r\n                  className=\"w-8 h-8 rounded-full mr-2\"\r\n                />\r\n              )}\r\n              <div\r\n                className={`px-3 py-2 rounded-lg max-w-[70%] ${\r\n                  mine\r\n                    ? \"bg-blue-500 text-white rounded-br-none\"\r\n                    : \"bg-gray-700 text-white rounded-bl-none\"\r\n                }`}\r\n              >\r\n                {/* If it's an image data-url, render <img> */}\r\n                {msg.content.startsWith(\"data:image\") ? (\r\n                  <img\r\n                    src={msg.content}\r\n                    alt=\"sent\"\r\n                    className=\"max-w-full rounded\"\r\n                  />\r\n                ) : (\r\n                  msg.content\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n        <div ref={messagesEndRef} />\r\n      </div>\r\n\r\n      {isTyping && <p className=\"px-4 italic text-sm text-gray-400\">Typing‚Ä¶</p>}\r\n\r\n      {/* Input area */}\r\n      <div className=\"px-4 py-2 bg-gray-800 rounded-b space-y-2\">\r\n        {/* Emoji Picker */}\r\n        {showEmojiPicker && (\r\n          <div className=\"grid grid-cols-8 gap-2 bg-gray-700 p-2 rounded\">\r\n            {EMOJI_LIST.map((e) => (\r\n              <button key={e} onClick={() => addEmoji(e)} className=\"text-2xl\">\r\n                {e}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => setShowEmojiPicker((v) => !v)}\r\n            className=\"text-2xl\"\r\n          >\r\n            üòÄ\r\n          </button>\r\n          <button onClick={onSelectPhoto} className=\"text-2xl\">\r\n            üì∑\r\n          </button>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            ref={fileInputRef}\r\n            onChange={onPhotoChange}\r\n            className=\"hidden\"\r\n          />\r\n\r\n          <input\r\n            type=\"text\"\r\n            value={input}\r\n            onChange={onType}\r\n            onKeyDown={(e) => e.key === \"Enter\" && send()}\r\n            placeholder=\"Type a message‚Ä¶\"\r\n            className=\"flex-1 bg-gray-700 px-3 py-2 rounded focus:outline-none\"\r\n          />\r\n\r\n          <button\r\n            onClick={send}\r\n            className=\"bg-blue-600 px-4 py-2 rounded hover:bg-blue-700 transition\"\r\n          >\r\n            Send\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </AppLayout>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,qCAAqC;;;;;AAGrC;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASA,MAAM,aAAa;IAAC;IAAM;IAAM;IAAM;IAAM;IAAM;IAAM;IAAM;CAAK;AAEpD,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAC3B,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,SAAS,CAAA,GAAA,iIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvD,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD;IAC1B,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD;IAC5B,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD;IAE5B,gCAAgC;IAChC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,WAAW,CAAC,MAAM,OAAO,IAAI,CAAC;IACrC,GAAG;QAAC;QAAS;QAAM;KAAO;IAE1B,qBAAqB;IACrB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,sHAAA,CAAA,UAAG,CACA,GAAG,CAAC,CAAC,eAAe,EAAE,QAAQ,EAC9B,IAAI,CAAC,CAAC,EAAE,IAAI,EAAE,GAAK,WAAW,KAAK,IAAI,GACvC,KAAK,CAAC,QAAQ,KAAK;IACxB,GAAG;QAAC;KAAO;IAEX,uCAAuC;IACvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,UAAU,CAAC,MAAM;QAEtB,OAAO,IAAI,CAAC,QAAQ,KAAK,EAAE;QAE3B,sHAAA,CAAA,UAAG,CACA,GAAG,CAAC,CAAC,UAAU,EAAE,QAAQ,EACzB,IAAI,CAAC,CAAC,EAAE,IAAI,EAAE,GAAK,YAAY,OAC/B,KAAK,CAAC,QAAQ,KAAK;QAEtB,OAAO,EAAE,CAAC,mBAAmB,CAAC;YAC5B,YAAY,CAAC,IAAM;uBAAI;oBAAG;iBAAI;QAChC;QACA,OAAO,EAAE,CAAC,gBAAgB,CAAC;YACzB,YAAY,CAAC,IAAM;uBAAI;oBAAG;iBAAI;QAChC;QACA,OAAO,EAAE,CAAC,UAAU,CAAC,EAAE,IAAI,EAAE;YAC3B,IAAI,SAAS,QAAQ,YAAY;QACnC;QACA,OAAO,EAAE,CAAC,eAAe,CAAC,EAAE,IAAI,EAAE;YAChC,IAAI,SAAS,QAAQ,YAAY;QACnC;QAEA,OAAO;YACL,OAAO,GAAG,CAAC;YACX,OAAO,GAAG,CAAC;YACX,OAAO,GAAG,CAAC;YACX,OAAO,GAAG,CAAC;QACb;IACF,GAAG;QAAC;QAAQ;QAAM;KAAO;IAEzB,yBAAyB;IACzB,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAC9D,GAAG;QAAC;KAAS;IAEb,4BAA4B;IAC5B,MAAM,OAAO;QACX,IAAI,CAAC,QAAQ;QACb,wDAAwD;QACxD,MAAM,UAAU,MAAM,IAAI;QAC1B,IAAI,CAAC,SAAS;QAEd,OAAO,IAAI,CAAC,gBAAgB;YAAE,aAAa;YAAQ;QAAQ;QAC3D,SAAS;QACT,mBAAmB;QACnB,OAAO,IAAI,CAAC,eAAe;YAAE,IAAI;QAAO;IAC1C;IAEA,gBAAgB;IAChB,MAAM,SAAS,CAAC;QACd,SAAS,EAAE,MAAM,CAAC,KAAK;QACvB,IAAI,CAAC,QAAQ;QACb,OAAO,IAAI,CAAC,UAAU;YAAE,IAAI;QAAO;QAEnC,aAAa,eAAe,OAAO;QACnC,eAAe,OAAO,GAAG,WAAW;YAClC,OAAO,IAAI,CAAC,eAAe;gBAAE,IAAI;YAAO;QAC1C,GAAG;IACL;IAEA,cAAc;IACd,MAAM,WAAW,CAAC;QAChB,SAAS,CAAC,IAAM,IAAI;IACtB;IAEA,kBAAkB;IAClB,MAAM,gBAAgB;QACpB,aAAa,OAAO,CAAC,KAAK;IAC5B;IACA,MAAM,gBAAgB,CAAC;QACrB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;QAC9B,IAAI,CAAC,MAAM;QACX,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG;YACd,SAAS,OAAO,MAAM,GAAG,YAAY;YACrC,mBAAmB;QACrB;QACA,OAAO,aAAa,CAAC;IACvB;IAEA,IAAI,WAAW,CAAC,MAAM,qBAAO,8OAAC;kBAAE;;;;;;IAChC,IAAI,CAAC,UAAU,CAAC,SAAS,qBAAO,8OAAC;kBAAE;;;;;;IAEnC,qBACE,8OAAC,+HAAA,CAAA,UAAS;;0BAER,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAO,SAAS,IAAM,OAAO,IAAI;wBAAI,WAAU;kCAAU;;;;;;kCAG1D,8OAAC;wBACC,KAAK,QAAQ,MAAM;wBACnB,KAAK,QAAQ,QAAQ;wBACrB,WAAU;;;;;;kCAEZ,8OAAC;wBAAG,WAAU;kCAAyB,QAAQ,QAAQ;;;;;;;;;;;;0BAIzD,8OAAC;gBAAI,WAAU;;oBACZ,SAAS,GAAG,CAAC,CAAC,KAAK;wBAClB,MAAM,OAAO,IAAI,SAAS,KAAK,KAAK,EAAE;wBACtC,qBACE,8OAAC;4BAEC,WAAW,CAAC,eAAe,EACzB,OAAO,gBAAgB,iBACvB;;gCAED,CAAC,sBACA,8OAAC;oCACC,KAAK,QAAQ,MAAM;oCACnB,KAAI;oCACJ,WAAU;;;;;;8CAGd,8OAAC;oCACC,WAAW,CAAC,iCAAiC,EAC3C,OACI,2CACA,0CACJ;8CAGD,IAAI,OAAO,CAAC,UAAU,CAAC,8BACtB,8OAAC;wCACC,KAAK,IAAI,OAAO;wCAChB,KAAI;wCACJ,WAAU;;;;;+CAGZ,IAAI,OAAO;;;;;;;2BA3BV;;;;;oBAgCX;kCACA,8OAAC;wBAAI,KAAK;;;;;;;;;;;;YAGX,0BAAY,8OAAC;gBAAE,WAAU;0BAAoC;;;;;;0BAG9D,8OAAC;gBAAI,WAAU;;oBAEZ,iCACC,8OAAC;wBAAI,WAAU;kCACZ,WAAW,GAAG,CAAC,CAAC,kBACf,8OAAC;gCAAe,SAAS,IAAM,SAAS;gCAAI,WAAU;0CACnD;+BADU;;;;;;;;;;kCAOnB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,SAAS,IAAM,mBAAmB,CAAC,IAAM,CAAC;gCAC1C,WAAU;0CACX;;;;;;0CAGD,8OAAC;gCAAO,SAAS;gCAAe,WAAU;0CAAW;;;;;;0CAGrD,8OAAC;gCACC,MAAK;gCACL,QAAO;gCACP,KAAK;gCACL,UAAU;gCACV,WAAU;;;;;;0CAGZ,8OAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU;gCACV,WAAW,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;gCACvC,aAAY;gCACZ,WAAU;;;;;;0CAGZ,8OAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;;;;;;;;AAOX","debugId":null}}]
}