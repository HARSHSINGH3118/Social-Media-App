{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///H:/Repositories/Social_media_app/social-media-frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\r\nimport axios from \"axios\";\r\n\r\n// Only read window.location.hostname when in the browser\r\nconst getHost = () =>\r\n  typeof window !== \"undefined\" ? window.location.hostname : \"localhost\";\r\n\r\nconst api = axios.create({\r\n  baseURL: `http://${getHost()}:5000/api`,\r\n  withCredentials: true,\r\n});\r\n\r\n// Only attach the interceptor in the browser\r\nif (typeof window !== \"undefined\") {\r\n  api.interceptors.request.use((config) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      config.headers = {\r\n        ...config.headers,\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n    }\r\n    return config;\r\n  });\r\n}\r\n\r\nexport default api;\r\n"],"names":[],"mappings":"AAAA,sBAAsB;;;;AACtB;;AAEA,yDAAyD;AACzD,MAAM,UAAU,IACd,sCAAgC,0BAA2B;AAE7D,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS,CAAC,OAAO,EAAE,UAAU,SAAS,CAAC;IACvC,iBAAiB;AACnB;AAEA,6CAA6C;AAC7C;;uCAae","debugId":null}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///H:/Repositories/Social_media_app/social-media-frontend/src/app/messages/%5BuserId%5D/page.jsx"],"sourcesContent":["// src/app/messages/[userId]/page.jsx\r\n\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { useSocket } from \"@/contexts/SocketContext\";\r\nimport api from \"@/services/api\";\r\n\r\nconst EMOJI_LIST = [\"😀\", \"😂\", \"😍\", \"😢\", \"👍\", \"🙏\", \"🎉\", \"💬\"];\r\nconst STUN_CONFIG = {\r\n  iceServers: [{ urls: \"stun:stun.l.google.com:19302\" }],\r\n};\r\n\r\nexport default function ChatPage() {\r\n  const { user, loading } = useAuth();\r\n  const { userId } = useParams();\r\n  const router = useRouter();\r\n  const socket = useSocket();\r\n\r\n  const [partner, setPartner] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n\r\n  // Video call state\r\n  const [incomingCall, setIncomingCall] = useState(null);\r\n  const [inCall, setInCall] = useState(false);\r\n  const [calling, setCalling] = useState(false);\r\n\r\n  // Refs\r\n  const fileInputRef = useRef();\r\n  const endRef = useRef();\r\n  const typingTimer = useRef();\r\n  const localVideoRef = useRef();\r\n  const remoteVideoRef = useRef();\r\n  const pcRef = useRef(null);\r\n\r\n  // Buffer for ICE candidates arriving before PC is ready\r\n  const pendingCandidates = useRef([]);\r\n\r\n  // Redirect if unauthenticated\r\n  useEffect(() => {\r\n    if (!loading && !user) router.push(\"/login\");\r\n  }, [loading, user, router]);\r\n\r\n  // Fetch partner info\r\n  useEffect(() => {\r\n    api\r\n      .get(`/users/profile/${userId}`)\r\n      .then(({ data }) => setPartner(data.user))\r\n      .catch(console.error);\r\n  }, [userId]);\r\n\r\n  // Chat + signaling event listeners\r\n  useEffect(() => {\r\n    if (!socket || !user) return;\r\n    socket.emit(\"join\", user.id);\r\n\r\n    api\r\n      .get(`/messages/${userId}`)\r\n      .then(({ data }) => setMessages(data))\r\n      .catch(console.error);\r\n\r\n    socket.on(\"receive_message\", (m) => setMessages((ms) => [...ms, m]));\r\n    socket.on(\"message_sent\", (m) => setMessages((ms) => [...ms, m]));\r\n    socket.on(\"typing\", ({ from }) => {\r\n      if (from === userId) setIsTyping(true);\r\n    });\r\n    socket.on(\"stop_typing\", ({ from }) => {\r\n      if (from === userId) setIsTyping(false);\r\n    });\r\n\r\n    // Video call signaling\r\n    socket.on(\"incoming_call\", ({ from, offer }) =>\r\n      setIncomingCall({ from, offer })\r\n    );\r\n    socket.on(\"call_accepted\", async ({ answer }) => {\r\n      await pcRef.current.setRemoteDescription(answer);\r\n      setInCall(true);\r\n    });\r\n    socket.on(\"ice_candidate\", async ({ candidate }) => {\r\n      if (pcRef.current) {\r\n        try {\r\n          await pcRef.current.addIceCandidate(candidate);\r\n        } catch (e) {\r\n          console.error(\"Error adding ICE candidate:\", e);\r\n        }\r\n      } else {\r\n        pendingCandidates.current.push(candidate);\r\n      }\r\n    });\r\n    socket.on(\"call_ended\", () => endCall());\r\n\r\n    return () => {\r\n      socket.off(\"receive_message\");\r\n      socket.off(\"message_sent\");\r\n      socket.off(\"typing\");\r\n      socket.off(\"stop_typing\");\r\n      socket.off(\"incoming_call\");\r\n      socket.off(\"call_accepted\");\r\n      socket.off(\"ice_candidate\");\r\n      socket.off(\"call_ended\");\r\n    };\r\n  }, [socket, user, userId]);\r\n\r\n  // Auto-scroll chat\r\n  useEffect(() => {\r\n    endRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  //\r\n  // ─── CHAT HANDLERS ────────────────────────────────────────────────────────────\r\n  //\r\n  const sendChat = () => {\r\n    if (!socket || !input.trim()) return;\r\n    socket.emit(\"send_message\", { receiver_id: userId, content: input });\r\n    setInput(\"\");\r\n    setShowEmojiPicker(false);\r\n    socket.emit(\"stop_typing\", { to: userId });\r\n  };\r\n  const onType = (e) => {\r\n    setInput(e.target.value);\r\n    if (!socket) return;\r\n    socket.emit(\"typing\", { to: userId });\r\n    clearTimeout(typingTimer.current);\r\n    typingTimer.current = setTimeout(() => {\r\n      socket.emit(\"stop_typing\", { to: userId });\r\n    }, 600);\r\n  };\r\n  const addEmoji = (emoji) => setInput((i) => i + emoji);\r\n  const pickPhoto = () => fileInputRef.current.click();\r\n  const onPhotoChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = () => setInput(reader.result);\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  //\r\n  // ─── VIDEO CALL HANDLERS ──────────────────────────────────────────────────────\r\n  //\r\n  const startCall = () => {\r\n    setCalling(true);\r\n  };\r\n\r\n  // Perform WebRTC setup after video elements mount\r\n  useEffect(() => {\r\n    if (!calling || !socket) return;\r\n\r\n    (async () => {\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        video: true,\r\n        audio: true,\r\n      });\r\n      localVideoRef.current.srcObject = stream;\r\n\r\n      const pc = new RTCPeerConnection(STUN_CONFIG);\r\n      pcRef.current = pc;\r\n\r\n      // Drain any buffered ICE candidates\r\n      pendingCandidates.current.forEach(async (cand) => {\r\n        try {\r\n          await pc.addIceCandidate(cand);\r\n        } catch (e) {\r\n          console.error(\"Error adding buffered ICE candidate:\", e);\r\n        }\r\n      });\r\n      pendingCandidates.current = [];\r\n\r\n      stream.getTracks().forEach((t) => pc.addTrack(t, stream));\r\n      pc.ontrack = (e) => {\r\n        remoteVideoRef.current.srcObject = e.streams[0];\r\n      };\r\n      pc.onicecandidate = ({ candidate }) => {\r\n        if (candidate) {\r\n          socket.emit(\"ice_candidate\", { to: userId, candidate });\r\n        }\r\n      };\r\n\r\n      const offer = await pc.createOffer();\r\n      await pc.setLocalDescription(offer);\r\n      socket.emit(\"call_user\", { to: userId, offer });\r\n    })();\r\n  }, [calling, socket, userId]);\r\n\r\n  const acceptCall = async () => {\r\n    if (!socket || !incomingCall) return;\r\n    setIncomingCall(null);\r\n    setInCall(true);\r\n\r\n    const { from, offer } = incomingCall;\r\n    const stream = await navigator.mediaDevices.getUserMedia({\r\n      video: true,\r\n      audio: true,\r\n    });\r\n    localVideoRef.current.srcObject = stream;\r\n\r\n    const pc = new RTCPeerConnection(STUN_CONFIG);\r\n    pcRef.current = pc;\r\n\r\n    // Drain buffered ICE candidates\r\n    pendingCandidates.current.forEach(async (cand) => {\r\n      try {\r\n        await pc.addIceCandidate(cand);\r\n      } catch (e) {\r\n        console.error(\"Error adding buffered ICE candidate:\", e);\r\n      }\r\n    });\r\n    pendingCandidates.current = [];\r\n\r\n    stream.getTracks().forEach((t) => pc.addTrack(t, stream));\r\n    pc.ontrack = (e) => {\r\n      remoteVideoRef.current.srcObject = e.streams[0];\r\n    };\r\n    pc.onicecandidate = ({ candidate }) => {\r\n      if (candidate) {\r\n        socket.emit(\"ice_candidate\", { to: from, candidate });\r\n      }\r\n    };\r\n\r\n    await pc.setRemoteDescription(offer);\r\n    const answer = await pc.createAnswer();\r\n    await pc.setLocalDescription(answer);\r\n    socket.emit(\"answer_call\", { to: from, answer });\r\n  };\r\n\r\n  const endCall = () => {\r\n    pcRef.current?.close();\r\n    pcRef.current = null;\r\n    setInCall(false);\r\n    setCalling(false);\r\n    setIncomingCall(null);\r\n    socket.emit(\"end_call\", { to: userId });\r\n  };\r\n\r\n  if (loading || !user || !socket || !partner) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50\">\r\n      <div className=\"bg-gray-800 w-full max-w-3xl h-[80vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between bg-gray-900 px-6 py-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <button onClick={() => router.back()} className=\"text-2xl\">\r\n              ←\r\n            </button>\r\n            <img src={partner.avatar} className=\"w-10 h-10 rounded-full\" />\r\n            <h2 className=\"text-xl font-semibold\">{partner.username}</h2>\r\n          </div>\r\n          {!inCall && !incomingCall && (\r\n            <button\r\n              onClick={startCall}\r\n              className=\"bg-green-500 px-3 py-1 rounded\"\r\n            >\r\n              📹 Call\r\n            </button>\r\n          )}\r\n          {inCall && (\r\n            <button onClick={endCall} className=\"bg-red-500 px-3 py-1 rounded\">\r\n              ✖️ End\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Video Streams */}\r\n        {(calling || inCall) && (\r\n          <div className=\"flex-1 relative bg-black\">\r\n            <video\r\n              ref={remoteVideoRef}\r\n              autoPlay\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n            <video\r\n              ref={localVideoRef}\r\n              autoPlay\r\n              muted\r\n              className=\"absolute bottom-4 right-4 w-32 h-24 object-cover rounded-lg border-2 border-white\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Incoming Call Overlay */}\r\n        {incomingCall && (\r\n          <div className=\"absolute inset-0 bg-black bg-opacity-70 flex items-center justify-center\">\r\n            <div className=\"bg-gray-900 p-6 rounded-lg text-center\">\r\n              <p className=\"mb-4\">{partner.username} is calling…</p>\r\n              <button\r\n                onClick={acceptCall}\r\n                className=\"bg-blue-500 px-4 py-2 rounded\"\r\n              >\r\n                Accept\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Chat UI */}\r\n        {!calling && !inCall && (\r\n          <>\r\n            <div className=\"flex-1 overflow-y-auto px-6 py-4 space-y-3\">\r\n              {messages.map((msg, i) => {\r\n                const mine = msg.sender_id === user.id;\r\n                return (\r\n                  <div\r\n                    key={i}\r\n                    className={`flex ${mine ? \"justify-end\" : \"justify-start\"}`}\r\n                  >\r\n                    {!mine && (\r\n                      <img\r\n                        src={partner.avatar}\r\n                        className=\"w-8 h-8 rounded-full mr-2\"\r\n                      />\r\n                    )}\r\n                    <div\r\n                      className={`px-4 py-2 rounded-lg max-w-[70%] ${\r\n                        mine\r\n                          ? \"bg-blue-500 text-white rounded-br-none\"\r\n                          : \"bg-gray-700 text-white rounded-bl-none\"\r\n                      }`}\r\n                    >\r\n                      {msg.content.startsWith(\"data:image\") ? (\r\n                        <img src={msg.content} className=\"rounded max-w-full\" />\r\n                      ) : (\r\n                        msg.content\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n              <div ref={endRef} />\r\n            </div>\r\n\r\n            {isTyping && (\r\n              <div className=\"px-6 pb-1\">\r\n                <span className=\"italic text-sm text-gray-400\">Typing…</span>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"bg-gray-900 px-6 py-4 flex items-center gap-3\">\r\n              <button\r\n                onClick={() => setShowEmojiPicker((v) => !v)}\r\n                className=\"text-2xl\"\r\n              >\r\n                😀\r\n              </button>\r\n              <button onClick={pickPhoto} className=\"text-2xl\">\r\n                📷\r\n              </button>\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                ref={fileInputRef}\r\n                onChange={onPhotoChange}\r\n                className=\"hidden\"\r\n              />\r\n\r\n              <input\r\n                type=\"text\"\r\n                value={input}\r\n                onChange={onType}\r\n                onKeyDown={(e) => e.key === \"Enter\" && sendChat()}\r\n                placeholder=\"Type your message…\"\r\n                className=\"flex-1 bg-gray-700 px-4 py-2 rounded-full focus:outline-none\"\r\n              />\r\n\r\n              <button\r\n                onClick={sendChat}\r\n                className=\"bg-blue-600 px-5 py-2 rounded-full hover:bg-blue-700 transition\"\r\n              >\r\n                Send\r\n              </button>\r\n            </div>\r\n\r\n            {showEmojiPicker && (\r\n              <div className=\"bg-gray-700 p-4 grid grid-cols-8 gap-2 overflow-y-auto max-h-40\">\r\n                {EMOJI_LIST.map((e) => (\r\n                  <button\r\n                    key={e}\r\n                    onClick={() => addEmoji(e)}\r\n                    className=\"text-2xl\"\r\n                  >\r\n                    {e}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}