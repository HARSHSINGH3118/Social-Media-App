{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///H:/Repositories/Social_media_app/social-media-frontend/src/app/create/page.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport axios from \"@/lib/api\";\r\nimport { toast } from \"react-hot-toast\";\r\n\r\nexport default function CreatePostPage() {\r\n  const [image, setImage] = useState(null);\r\n  const [preview, setPreview] = useState(\"\");\r\n  const [caption, setCaption] = useState(\"\");\r\n  const [tags, setTags] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const router = useRouter();\r\n\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setImage(file);\r\n      setPreview(URL.createObjectURL(file));\r\n    }\r\n  };\r\n\r\n  const uploadToCloudinary = async () => {\r\n    const formData = new FormData();\r\n    formData.append(\"file\", image);\r\n    formData.append(\"upload_preset\", \"social_media_app\"); // ðŸ” Replace\r\n    const res = await axios.post(\r\n      \"https://api.cloudinary.com/v1_1/dienbglye/image/upload\",\r\n      formData\r\n    ); // ðŸ” Replace\r\n    return res.data.secure_url;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!image || !caption.trim()) {\r\n      toast.error(\"Image and caption are required\");\r\n      return;\r\n    }\r\n    try {\r\n      setLoading(true);\r\n      const imageUrl = await uploadToCloudinary();\r\n      const tagArray = tags\r\n        .split(\",\")\r\n        .map((tag) => tag.trim())\r\n        .filter(Boolean);\r\n\r\n      await axios.post(\"/posts\", {\r\n        imageUrl,\r\n        caption,\r\n        tags: tagArray,\r\n      });\r\n\r\n      toast.success(\"Post created!\");\r\n      router.push(\"/dashboard\");\r\n    } catch (err) {\r\n      toast.error(\"Failed to create post\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-xl mx-auto p-4\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Create Post</h1>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <input type=\"file\" accept=\"image/*\" onChange={handleImageChange} />\r\n        {preview && (\r\n          <img\r\n            src={preview}\r\n            alt=\"Preview\"\r\n            className=\"w-full h-64 object-cover rounded\"\r\n          />\r\n        )}\r\n        <textarea\r\n          className=\"w-full border p-2 rounded\"\r\n          placeholder=\"Write your caption...\"\r\n          rows={3}\r\n          value={caption}\r\n          onChange={(e) => setCaption(e.target.value)}\r\n        />\r\n        <input\r\n          className=\"w-full border p-2 rounded\"\r\n          placeholder=\"Tags (comma-separated)\"\r\n          value={tags}\r\n          onChange={(e) => setTags(e.target.value)}\r\n        />\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n          disabled={loading}\r\n        >\r\n          {loading ? \"Uploading...\" : \"Create Post\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;;;AAHA;;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,oBAAoB,CAAC;QACzB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;QAC9B,IAAI,MAAM;YACR,SAAS;YACT,WAAW,IAAI,eAAe,CAAC;QACjC;IACF;IAEA,MAAM,qBAAqB;QACzB,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QACxB,SAAS,MAAM,CAAC,iBAAiB,qBAAqB,aAAa;QACnE,MAAM,MAAM,MAAM,iHAAA,CAAA,UAAK,CAAC,IAAI,CAC1B,0DACA,WACC,aAAa;QAChB,OAAO,IAAI,IAAI,CAAC,UAAU;IAC5B;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,IAAI,CAAC,SAAS,CAAC,QAAQ,IAAI,IAAI;YAC7B,MAAM,KAAK,CAAC;YACZ;QACF;QACA,IAAI;YACF,WAAW;YACX,MAAM,WAAW,MAAM;YACvB,MAAM,WAAW,KACd,KAAK,CAAC,KACN,GAAG,CAAC,CAAC,MAAQ,IAAI,IAAI,IACrB,MAAM,CAAC;YAEV,MAAM,iHAAA,CAAA,UAAK,CAAC,IAAI,CAAC,UAAU;gBACzB;gBACA;gBACA,MAAM;YACR;YAEA,MAAM,OAAO,CAAC;YACd,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAK;YACZ,MAAM,KAAK,CAAC;QACd,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA0B;;;;;;0BACxC,8OAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACtC,8OAAC;wBAAM,MAAK;wBAAO,QAAO;wBAAU,UAAU;;;;;;oBAC7C,yBACC,8OAAC;wBACC,KAAK;wBACL,KAAI;wBACJ,WAAU;;;;;;kCAGd,8OAAC;wBACC,WAAU;wBACV,aAAY;wBACZ,MAAM;wBACN,OAAO;wBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;kCAE5C,8OAAC;wBACC,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;kCAEzC,8OAAC;wBACC,MAAK;wBACL,WAAU;wBACV,UAAU;kCAET,UAAU,iBAAiB;;;;;;;;;;;;;;;;;;AAKtC","debugId":null}}]
}