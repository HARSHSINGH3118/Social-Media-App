{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///H:/Repositories/Social_media_app/social-media-frontend/src/services/api.js"],"sourcesContent":["// src/services/api.js\r\nimport axios from \"axios\";\r\n\r\n// Only read window.location.hostname when in the browser\r\nconst getHost = () =>\r\n  typeof window !== \"undefined\" ? window.location.hostname : \"localhost\";\r\n\r\nconst api = axios.create({\r\n  baseURL: `http://${getHost()}:5000`,\r\n  withCredentials: true,\r\n});\r\n\r\n// Only attach the interceptor in the browser\r\nif (typeof window !== \"undefined\") {\r\n  api.interceptors.request.use((config) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      config.headers = {\r\n        ...config.headers,\r\n        Authorization: `Bearer ${token}`,\r\n      };\r\n    }\r\n    return config;\r\n  });\r\n}\r\n\r\nexport default api;\r\n"],"names":[],"mappings":"AAAA,sBAAsB;;;;AACtB;;AAEA,yDAAyD;AACzD,MAAM,UAAU,IACd,uCAAgC,OAAO,QAAQ,CAAC,QAAQ,GAAG;AAE7D,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS,AAAC,UAAmB,OAAV,WAAU;IAC7B,iBAAiB;AACnB;AAEA,6CAA6C;AAC7C,wCAAmC;IACjC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACT,OAAO,OAAO,GAAG;gBACf,GAAG,OAAO,OAAO;gBACjB,eAAe,AAAC,UAAe,OAAN;YAC3B;QACF;QACA,OAAO;IACT;AACF;uCAEe","debugId":null}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":["file:///H:/Repositories/Social_media_app/social-media-frontend/src/app/messages/%5BuserId%5D/page.jsx"],"sourcesContent":["// src/app/messages/[userId]/page.jsx\r\n\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { useSocket } from \"@/contexts/SocketContext\";\r\nimport api from \"@/services/api\";\r\n\r\nconst EMOJI_LIST = [\"😀\", \"😂\", \"😍\", \"😢\", \"👍\", \"🙏\", \"🎉\", \"💬\"];\r\nconst STUN_CONFIG = {\r\n  iceServers: [{ urls: \"stun:stun.l.google.com:19302\" }],\r\n};\r\n\r\nexport default function ChatPage() {\r\n  const { user, loading } = useAuth();\r\n  const { userId } = useParams();\r\n  const router = useRouter();\r\n  const socket = useSocket();\r\n\r\n  const [partner, setPartner] = useState(null);\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\r\n\r\n  // Video call state\r\n  const [incomingCall, setIncomingCall] = useState(null);\r\n  const [inCall, setInCall] = useState(false);\r\n  const [calling, setCalling] = useState(false);\r\n\r\n  const fileInputRef = useRef();\r\n  const endRef = useRef();\r\n  const typingTimer = useRef();\r\n  const localVideoRef = useRef();\r\n  const remoteVideoRef = useRef();\r\n  const pcRef = useRef(null);\r\n  const pendingCandidates = useRef([]);\r\n\r\n  // Redirect if not logged in\r\n  useEffect(() => {\r\n    if (!loading && !user) router.push(\"/login\");\r\n  }, [loading, user, router]);\r\n\r\n  // Fetch partner info\r\n  useEffect(() => {\r\n    api\r\n      .get(`/api/users/profile/${userId}`)\r\n      .then(({ data }) => setPartner(data.user))\r\n      .catch(console.error);\r\n  }, [userId]);\r\n\r\n  // Chat and signaling listeners\r\n  useEffect(() => {\r\n    if (!socket || !user) return;\r\n    socket.emit(\"join\", user.id);\r\n\r\n    api\r\n      .get(`/api/messages/${userId}`)\r\n      .then(({ data }) => setMessages(data))\r\n      .catch(console.error);\r\n\r\n    socket.on(\"receive_message\", (m) => setMessages((ms) => [...ms, m]));\r\n    socket.on(\"message_sent\", (m) => setMessages((ms) => [...ms, m]));\r\n    socket.on(\"typing\", ({ from }) => from === userId && setIsTyping(true));\r\n    socket.on(\r\n      \"stop_typing\",\r\n      ({ from }) => from === userId && setIsTyping(false)\r\n    );\r\n\r\n    // Video call signaling\r\n    socket.on(\"incoming_call\", ({ from, offer }) =>\r\n      setIncomingCall({ from, offer })\r\n    );\r\n    socket.on(\"call_accepted\", async ({ answer }) => {\r\n      await pcRef.current.setRemoteDescription(answer);\r\n      setInCall(true);\r\n    });\r\n    socket.on(\"ice_candidate\", async ({ candidate }) => {\r\n      if (pcRef.current) {\r\n        try {\r\n          await pcRef.current.addIceCandidate(candidate);\r\n        } catch (e) {\r\n          console.error(\"Error adding ICE candidate:\", e);\r\n        }\r\n      } else {\r\n        pendingCandidates.current.push(candidate);\r\n      }\r\n    });\r\n    socket.on(\"call_ended\", () => endCall());\r\n\r\n    return () => {\r\n      socket.off(\"receive_message\");\r\n      socket.off(\"message_sent\");\r\n      socket.off(\"typing\");\r\n      socket.off(\"stop_typing\");\r\n      socket.off(\"incoming_call\");\r\n      socket.off(\"call_accepted\");\r\n      socket.off(\"ice_candidate\");\r\n      socket.off(\"call_ended\");\r\n    };\r\n  }, [socket, user, userId]);\r\n\r\n  // Auto-scroll chat\r\n  useEffect(() => {\r\n    endRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  // ── Chat Handlers ────────────────────────────────────────────────────────────\r\n  const sendChat = () => {\r\n    if (!socket || !input.trim()) return;\r\n    socket.emit(\"send_message\", {\r\n      receiver_id: userId,\r\n      content: input,\r\n    });\r\n    setInput(\"\");\r\n    setShowEmojiPicker(false);\r\n    socket.emit(\"stop_typing\", { to: userId });\r\n  };\r\n  const onType = (e) => {\r\n    setInput(e.target.value);\r\n    if (!socket) return;\r\n    socket.emit(\"typing\", { to: userId });\r\n    clearTimeout(typingTimer.current);\r\n    typingTimer.current = setTimeout(() => {\r\n      socket.emit(\"stop_typing\", { to: userId });\r\n    }, 600);\r\n  };\r\n  const addEmoji = (emoji) => setInput((i) => i + emoji);\r\n  const pickPhoto = () => fileInputRef.current.click();\r\n  const onPhotoChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    const reader = new FileReader();\r\n    reader.onload = () => setInput(reader.result);\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  // ── Video Call Handlers ──────────────────────────────────────────────────────\r\n  const startCall = () => setCalling(true);\r\n\r\n  // Setup WebRTC once `calling` is true\r\n  useEffect(() => {\r\n    if (!calling || !socket) return;\r\n    (async () => {\r\n      let stream;\r\n      try {\r\n        stream = await navigator.mediaDevices.getUserMedia({\r\n          video: true,\r\n          audio: true,\r\n        });\r\n      } catch (err) {\r\n        console.warn(\"getUserMedia(video+audio) failed:\", err);\r\n        if (err.name === \"NotFoundError\") {\r\n          try {\r\n            stream = await navigator.mediaDevices.getUserMedia({\r\n              video: false,\r\n              audio: true,\r\n            });\r\n            alert(\"No camera found — starting audio-only call.\");\r\n          } catch (err2) {\r\n            console.error(\"getUserMedia(audio) also failed:\", err2);\r\n            alert(\"No camera or microphone available.\");\r\n            setCalling(false);\r\n            return;\r\n          }\r\n        } else {\r\n          console.error(\"getUserMedia error:\", err);\r\n          setCalling(false);\r\n          return;\r\n        }\r\n      }\r\n      localVideoRef.current.srcObject = stream;\r\n\r\n      const pc = new RTCPeerConnection(STUN_CONFIG);\r\n      pcRef.current = pc;\r\n\r\n      // Drain buffered ICE candidates\r\n      for (let cand of pendingCandidates.current) {\r\n        try {\r\n          await pc.addIceCandidate(cand);\r\n        } catch (e) {\r\n          console.error(\"Error adding buffered ICE candidate:\", e);\r\n        }\r\n      }\r\n      pendingCandidates.current = [];\r\n\r\n      stream.getTracks().forEach((t) => pc.addTrack(t, stream));\r\n      pc.ontrack = (e) => {\r\n        remoteVideoRef.current.srcObject = e.streams[0];\r\n      };\r\n      pc.onicecandidate = ({ candidate }) => {\r\n        if (candidate) {\r\n          socket.emit(\"ice_candidate\", { to: userId, candidate });\r\n        }\r\n      };\r\n\r\n      const offer = await pc.createOffer();\r\n      await pc.setLocalDescription(offer);\r\n      socket.emit(\"call_user\", { to: userId, offer });\r\n    })();\r\n  }, [calling, socket, userId]);\r\n\r\n  const acceptCall = async () => {\r\n    if (!socket || !incomingCall) return;\r\n    setIncomingCall(null);\r\n    setInCall(true);\r\n\r\n    let stream;\r\n    try {\r\n      stream = await navigator.mediaDevices.getUserMedia({\r\n        video: true,\r\n        audio: true,\r\n      });\r\n    } catch (err) {\r\n      console.warn(\"getUserMedia(video+audio) failed:\", err);\r\n      if (err.name === \"NotFoundError\") {\r\n        try {\r\n          stream = await navigator.mediaDevices.getUserMedia({\r\n            video: false,\r\n            audio: true,\r\n          });\r\n          alert(\"No camera found — accepting audio-only call.\");\r\n        } catch (err2) {\r\n          console.error(\"getUserMedia(audio) also failed:\", err2);\r\n          alert(\"No camera or microphone available.\");\r\n          setInCall(false);\r\n          return;\r\n        }\r\n      } else {\r\n        console.error(\"getUserMedia error:\", err);\r\n        setInCall(false);\r\n        return;\r\n      }\r\n    }\r\n    localVideoRef.current.srcObject = stream;\r\n\r\n    const { from, offer } = incomingCall;\r\n    const pc = new RTCPeerConnection(STUN_CONFIG);\r\n    pcRef.current = pc;\r\n\r\n    for (let cand of pendingCandidates.current) {\r\n      try {\r\n        await pc.addIceCandidate(cand);\r\n      } catch (e) {\r\n        console.error(\"Error adding buffered ICE candidate:\", e);\r\n      }\r\n    }\r\n    pendingCandidates.current = [];\r\n\r\n    stream.getTracks().forEach((t) => pc.addTrack(t, stream));\r\n    pc.ontrack = (e) => {\r\n      remoteVideoRef.current.srcObject = e.streams[0];\r\n    };\r\n    pc.onicecandidate = ({ candidate }) => {\r\n      if (candidate) {\r\n        socket.emit(\"ice_candidate\", { to: from, candidate });\r\n      }\r\n    };\r\n\r\n    await pc.setRemoteDescription(offer);\r\n    const answer = await pc.createAnswer();\r\n    await pc.setLocalDescription(answer);\r\n    socket.emit(\"answer_call\", { to: from, answer });\r\n  };\r\n\r\n  const endCall = () => {\r\n    pcRef.current?.close();\r\n    pcRef.current = null;\r\n    setInCall(false);\r\n    setCalling(false);\r\n    setIncomingCall(null);\r\n    socket.emit(\"end_call\", { to: userId });\r\n  };\r\n\r\n  if (loading || !user || !socket || !partner) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50\">\r\n      <div className=\"bg-gray-800 w-full max-w-3xl h-[80vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between bg-gray-900 px-6 py-4\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <button onClick={() => router.back()} className=\"text-2xl\">\r\n              ←\r\n            </button>\r\n            <img\r\n              src={partner.avatar}\r\n              alt={partner.username}\r\n              className=\"w-10 h-10 rounded-full\"\r\n            />\r\n            <h2 className=\"text-xl font-semibold\">{partner.username}</h2>\r\n          </div>\r\n          {!inCall && !incomingCall && (\r\n            <button\r\n              onClick={startCall}\r\n              className=\"bg-green-500 px-3 py-1 rounded\"\r\n            >\r\n              📹 Call\r\n            </button>\r\n          )}\r\n          {inCall && (\r\n            <button onClick={endCall} className=\"bg-red-500 px-3 py-1 rounded\">\r\n              ✖️ End\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Video Streams */}\r\n        {(calling || inCall) && (\r\n          <div className=\"flex-1 relative bg-black\">\r\n            <video\r\n              ref={remoteVideoRef}\r\n              autoPlay\r\n              className=\"w-full h-full object-cover\"\r\n            />\r\n            <video\r\n              ref={localVideoRef}\r\n              autoPlay\r\n              muted\r\n              className=\"absolute bottom-4 right-4 w-32 h-24 object-cover rounded-lg border-2 border-white\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* Incoming Call Overlay */}\r\n        {incomingCall && (\r\n          <div className=\"absolute inset-0 bg-black bg-opacity-70 flex items-center justify-center\">\r\n            <div className=\"bg-gray-900 p-6 rounded-lg text-center\">\r\n              <p className=\"mb-4\">{partner.username} is calling…</p>\r\n              <button\r\n                onClick={acceptCall}\r\n                className=\"bg-blue-500 px-4 py-2 rounded\"\r\n              >\r\n                Accept\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Chat UI */}\r\n        {!calling && !inCall && (\r\n          <>\r\n            <div className=\"flex-1 overflow-y-auto px-6 py-4 space-y-3\">\r\n              {messages.map((msg, i) => {\r\n                const mine = msg.sender_id === user.id;\r\n                return (\r\n                  <div\r\n                    key={i}\r\n                    className={`flex ${mine ? \"justify-end\" : \"justify-start\"}`}\r\n                  >\r\n                    {!mine && (\r\n                      <img\r\n                        src={partner.avatar}\r\n                        alt=\"\"\r\n                        className=\"w-8 h-8 rounded-full mr-2\"\r\n                      />\r\n                    )}\r\n                    <div\r\n                      className={`px-4 py-2 rounded-lg max-w-[70%] ${\r\n                        mine\r\n                          ? \"bg-blue-500 text-white rounded-br-none\"\r\n                          : \"bg-gray-700 text-white rounded-bl-none\"\r\n                      }`}\r\n                    >\r\n                      {msg.content.startsWith(\"data:image\") ? (\r\n                        <img\r\n                          src={msg.content}\r\n                          alt=\"sent\"\r\n                          className=\"rounded max-w-full\"\r\n                        />\r\n                      ) : (\r\n                        msg.content\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n              <div ref={endRef} />\r\n            </div>\r\n\r\n            {isTyping && (\r\n              <div className=\"px-6 pb-1\">\r\n                <span className=\"italic text-sm text-gray-400\">Typing…</span>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"bg-gray-900 px-6 py-4 flex items-center gap-3\">\r\n              <button\r\n                onClick={() => setShowEmojiPicker((v) => !v)}\r\n                className=\"text-2xl\"\r\n              >\r\n                😀\r\n              </button>\r\n              <button onClick={pickPhoto} className=\"text-2xl\">\r\n                📷\r\n              </button>\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                ref={fileInputRef}\r\n                onChange={onPhotoChange}\r\n                className=\"hidden\"\r\n              />\r\n\r\n              <input\r\n                type=\"text\"\r\n                value={input}\r\n                onChange={onType}\r\n                onKeyDown={(e) => e.key === \"Enter\" && sendChat()}\r\n                placeholder=\"Type your message…\"\r\n                className=\"flex-1 bg-gray-700 px-4 py-2 rounded-full focus:outline-none\"\r\n              />\r\n\r\n              <button\r\n                onClick={sendChat}\r\n                className=\"bg-blue-600 px-5 py-2 rounded-full hover:bg-blue-700 transition\"\r\n              >\r\n                Send\r\n              </button>\r\n            </div>\r\n\r\n            {showEmojiPicker && (\r\n              <div className=\"bg-gray-700 p-4 grid grid-cols-8 gap-2 overflow-y-auto max-h-40\">\r\n                {EMOJI_LIST.map((e) => (\r\n                  <button\r\n                    key={e}\r\n                    onClick={() => addEmoji(e)}\r\n                    className=\"text-2xl\"\r\n                  >\r\n                    {e}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}